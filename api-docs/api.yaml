swagger: "2.0"
info:
  version: 2.4.0
  title: Koverse API
  description: >
        Koverse Web API Specification


host: koverse.swagger.io:8000

consumes:
  - application/json
produces:
  - application/json

definitions:
  dataSet:
    $ref: schemas/dataSet.yaml
  dataSetAttributes:
    $ref: schemas/dataSetAttributes.yaml
  dataSetAttributeUpdateList:
    $ref: schemas/dataSetAttributeUpdateList.yaml
  dataSetIndexingPolicy:
    $ref: schemas/dataSetIndexingPolicy.yaml
  dataSetJob:
    $ref: schemas/dataSetJob.yaml
  dataSetMetadata:
    $ref: schemas/dataSetMetadata.yaml
  dataSetPermission:
    $ref: schemas/dataSetPermission.yaml
  dataSetResult:
    $ref: schemas/dataSetResult.yaml
  dataSetSchemas:
    $ref: schemas/dataSetSchemas.yaml
  login:
    $ref: schemas/login.yaml
  logout:
    $ref: schemas/logout.yaml
  record:
    $ref: schemas/record.yaml
  #searchAutocomplete:
  #  $ref: schemas/searchAutocomplete.yaml
  user:
    $ref: schemas/user.yaml

parameters:
  dataSetAttributeUpdateList:
    name: dataSetAttributeUpdateList
    in: body
    description: Attribute update list for masking attributes
    required: true
    schema:
      $ref: schemas/dataSetAttributeUpdateList.yaml
  dataSetId:
    name: dataSetId
    in: path
    description: Unique identifier of the data set
    required: true
    type: string
  fileType:
    name: fileType
    in: path
    description: fileType to download
    required: false
    type: string
    enum: [json, csv]
  objectQuery:
    name: query
    in: body
    required: true
    schema:
      $ref: schemas/objectQuery.yaml
  objectQueryNames:
    name: query
    in: body
    required: true
    schema:
      $ref: schemas/objectQueryNames.yaml
  permissionId:
    name: permissionId
    in: path
    description: Unique identifier of the permission
    required: true
    type: string
  recordStyle:
    name: recordStyle
    in: query
    description: >
          Requests a more efficient representation of records
    required: false
    type: string
    enum: [2.2]

paths:
  /api/dataSets:
    $ref: paths/dataSets.yaml
  /api/dataSets/{dataSetId}:
    $ref: paths/dataSetId.yaml
  /api/dataSets/{dataSetId}/attributeNames:
    $ref: paths/dataSetAttributeNames.yaml
  /api/dataSets/{dataSetId}/attributes:
    $ref: paths/dataSetAttributes.yaml
  /api/dataSets/{dataSetId}/clearDataSet:
    $ref: paths/dataSetClearDataSet.yaml
  /api/dataSets/{dataSetId}/flatSchema:
    $ref: paths/dataSetFlatSchema.yaml
  /api/dataSets/{dataSetId}/indexingPolicy:
    $ref: paths/dataSetIndexingPolicies.yaml
  /api/dataSets/{dataSetId}/permissions:
    $ref: paths/dataSetPermissions.yaml
  /api/dataSets/{dataSetId}/permissions/{permissionId}:
    $ref: paths/datasetPermissionId.yaml
  /api/dataSets/{dataSetId}/jobs:
    $ref: paths/dataSetJobs.yaml
  /api/dataSets/{dataSetId}/records:
    $ref: paths/dataSetRecords.yaml
  /api/dataSets/{dataSetId}/schema:
    $ref: paths/dataSetSchema.yaml
  /api/dataSets/{dataSetId}/repair:
    $ref: paths/dataSetRepair.yaml
  /api/dataSets/{dataSetId}/attributes/masking:
    $ref: paths/dataSetAttributesMasking.yaml

# this may not belong in a web app API

#  /api/dataSets/{dataSetId}/download/{fileType}:
#    $ref: paths/dataSetDownload.yaml
#  /api/dataSets/{dataSetId}/records:
#    $ref: paths/records.yaml
  /api/login:
    $ref: paths/login.yaml
  /api/logout:
    $ref: paths/logout.yaml
  /api/query/:
    $ref: paths/queryLucene.yaml
  /api/query/object:
    $ref: paths/queryObject.yaml
  /api/query/object/names:
    $ref: paths/queryObjectNames.yaml
  #/api/search/autocomplete:
  #  $ref: paths/searchAutocomplete.yaml
